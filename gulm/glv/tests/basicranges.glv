# simple are ranges working test.
# shows that one node can do things and it all works.
# (grabbing sub ranges. mass unlocking. xmoting portions of locks.)
nodecount 1

test
	lock 0 0 firstlock [0 2000] exclusive noflags nolvb
	lrpl 0 0 firstlock [0 2000] exclusive cachable ok nolvb
end

test
	lock 0 0 firstlock [0 2000] unlock noflags nolvb
	lrpl 0 0 firstlock [0 2000] unlock noflags ok nolvb
end

# two seperate ranges
test
	lock 0 0 seperateranges [0 200] exclusive noflags nolvb
	lrpl 0 0 seperateranges [0 200] exclusive cachable ok nolvb
end

test
	lock 0 0 seperateranges [222 2000] exclusive noflags nolvb
	lrpl 0 0 seperateranges [222 2000] exclusive cachable ok nolvb
end

# single unlock
test
	lock 0 0 seperateranges [0 2000] unlock noflags nolvb
	lrpl 0 0 seperateranges [0 2000] unlock noflags ok nolvb
end

# xmote the right side.
test
	lock 0 0 rightside [0 2000] exclusive noflags nolvb
	lrpl 0 0 rightside [0 2000] exclusive cachable ok nolvb
end

test
	lock 0 0 rightside [1000 3000] shared noflags nolvb
	lrpl 0 0 rightside [1000 3000] shared cachable ok nolvb
end

test
	lock 0 0 rightside unlock noflags nolvb
	lrpl 0 0 rightside unlock noflags ok nolvb
end

# xmote the left side.
test
	lock 0 0 leftside [0 2000] shared noflags nolvb
	lrpl 0 0 leftside [0 2000] shared cachable ok nolvb
end

test
	lock 0 0 leftside [0 1000] exclusive noflags nolvb
	lrpl 0 0 leftside [0 1000] exclusive cachable ok nolvb
end

test
	lock 0 0 leftside unlock noflags nolvb
	lrpl 0 0 leftside unlock noflags ok nolvb
end

# xmote the middle.
test
	lock 0 0 themiddle [0 3000] deferred noflags nolvb
	lrpl 0 0 themiddle [0 3000] deferred cachable ok nolvb
end

test
	lock 0 0 themiddle [500 2000] shared noflags nolvb
	lrpl 0 0 themiddle [500 2000] shared cachable ok nolvb
end

test
	lock 0 0 themiddle unlock noflags nolvb
	lrpl 0 0 themiddle unlock noflags ok nolvb
end

# just for smiles.
test
	lock 0 0 smiles [5 5] deferred noflags nolvb
	lrpl 0 0 smiles [5 5] deferred cachable ok nolvb
end

test
	lock 0 0 smiles [10 10] shared noflags nolvb
	lrpl 0 0 smiles [10 10] shared cachable ok nolvb
end

test
	lock 0 0 smiles [15 15] exclusive noflags nolvb
	lrpl 0 0 smiles [15 15] exclusive cachable ok nolvb
end

test
	lock 0 0 smiles unlock noflags nolvb
	lrpl 0 0 smiles unlock noflags ok nolvb
end

