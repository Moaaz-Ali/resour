.\"  Copyright (C) Sistina Software, Inc.  1997-2003  All rights reserved.
.\"  Copyright (C) 2004 Red Hat, Inc.  All rights reserved.

.tl 'gfs_jadd(8)''gfs_jadd(8)'
'\"
'\"    This file is maintained by:
'\"      Steven Whitehouse <steve@sistina.com>
'\"    
'\"	View with 'groff -t -e -mandoc -Tlatin1 gfs_jadd.8 | less'  
'\"

\fBNAME\fP
.in +7
gfs_jadd \- Add journals to a GFS filesystem

.in
\fBSYNOPSIS\fP
.in +8
\fBgfs_jadd\fP\ [options]\ [\fB-j\fP\ \fI<num>\fR]\ [\fB-J\fP\ \fI\
<size>\fR]\ \fBdevice\fP\ |\fB mount_point\fP\ [\fBdevice\fP\ |\fBmount_point\fP...]

.in
\fBDESCRIPTION\fP
.in +7
\fIgfs_jadd\fR is used to add journals to a GFS filesystem after
the device upon which the filesystem resides has been grown.
By running \fIgfs_jadd\fR
on a GFS filesystem, you are filling in space between the current end
of the filesystem and the end of the device upon which the filesystem
resides.  When this operation
is complete, the journal index is updated so that machines mounting the
filesystem at a later date will see the newly created journals in
addition to the journals already there. Machines which are already running
in the cluster are unaffected.

\fIgfs_jadd\fR will not use space that has been formatted for filesystem data even if that space has never been populated with files.

You may only run \fIgfs_jadd\fR on a mounted filesystem, addition of journals to 
unmounted filesystems is not supported.  
You only need to run \fIgfs_jadd\fR
on one node in the cluster. All the other nodes will see the expansion
has occurred when required.

You must be superuser to execute \fIgfs_jadd\fR. The
\fIgfs_jadd\fR
tool tries to prevent you from corrupting your filesystem by checking as
many of the likely problems as it can. When growing a filesystem,
only the last step of updating the journal index affects the currently
mounted filesystem and so failure part way through the expansion process
should leave your filesystem in its original state.

You can run \fIgfs_jadd\fR with the \fI-Tv\fR
flags to get a display of the current state of a mounted GFS filesystem.
This can be useful to do after the journal addition process to see if the
changes have been successful.

.in
\fBOPTIONS\fR
.in +7
\fB-j num\fP
.in +7
The number of new journals to add. This defaults to 1.
.sp
.in
\fB-J size\fP
.in +7
The size of the new journals in megabytes. The defaults to 128MB (the
minimum size allowed is 32MB). If you want to add journals of different
sizes to the filesystem, you'll need to run gfs_jadd once for each
different size of journal. The size you specify here will be rounded
down so that it is a multiple of the journal segment size which was
specified at filesystem creation time.
.sp
.in
\fB-h\fP
.in +7
Help. Prints out a short usage message and exits.
.sp
.in
\fB-q\fP
.in +7
Quiet. Turns down the verbosity level.
.sp
.in
\fB-T\fP
.in +7
Test. Do all calculations, but do not write any data to the disk and do
not add journals. This is used to discover what the tool would
have done were it run without this flag. You probably want to turn the
verbosity level up in order to gain most information from this option.
.sp
.in
\fB-V\fP
.in +7
Version. Print version information, then exit.
.sp
.in
\fB-v\fP
.in +7
Verbose. Turn up verbosity of messages.
.sp
.in
.in -7
\fBSEE ALSO\fP
.in +7
\fIgfs_mkfs(8) gfs_grow(8)\fR
.in -7
