###############################################################################
###############################################################################
##
##  Copyright (C) 2004 Red Hat, Inc.  All rights reserved.
##
##  This copyrighted material is made available to anyone wishing to use,
##  modify, copy, or redistribute it subject to the terms and conditions
##  of the GNU General Public License v.2.
##
###############################################################################
###############################################################################
%define vers @VERS@
%define rel @REL@

Name: ccs
Version: %vers
Release: %rel
License: GPL
Group: System Environment/Base
Summary: CCS - The Cluster Configuration System
BuildRequires: magma-devel
Conflicts: GFS <= 6.0
Conflicts: GFS-modules
Requires: magma-plugins

Source0: %{name}-%{version}-%{release}.tar.gz

BuildRoot: %{_tmppath}/%{name}-%{version}-%{release}-buildroot

%description
CCS - The Cluster Configuration System

%package devel
Summary: CCS static library
Group: System Environment/Libraries

%description devel
This package contains the CCS header file and static library, which
is used by several cluster products.

%prep
%setup -q

%build
./configure --libdir=%{_libdir} --mandir=%{_mandir}
make

%install
rm -rf $RPM_BUILD_ROOT
make install DESTDIR=$RPM_BUILD_ROOT

%clean
rm -rf $RPM_BUILD_ROOT

%files
%defattr(-,root,root,-)
# Binaries
/sbin/ccs_test
/sbin/ccsd

# Shared Libraries

%doc
# Man pages
%{_mandir}


%files devel
%defattr(-,root,root,-)
# Static Libraries and header files
%{_libdir}/libccs.a
%{_includedir}/ccs.h

%changelog
* Fri Oct 22 2004 Chris Feist <cfeist@redhat.com>
- Update for new upstream sources
* Mon Aug 16 2004 Jon Brassow <jbrassow@redhat.com>
- add magma-plugins as an installation requirement
* Fri Aug 13 2004 Jon Brassow <jbrassow@redhat.com>
- buildrequires magma-devel not magma
* Fri Aug 13 2004 Jon Brassow <jbrassow@redhat.com>
- add magma as a build requirement instead of cman-kernheaders
* Fri Aug 13 2004 Jon Brassow <jbrassow@redhat.com>
- Fix bug when updates occur at the same time
- Some basic clean-up
- Add man pages
* Wed Jul 14 2004 Jon Brassow <jbrassow@redhat.com>
- Update for new upstream sources
* Tue Jul 13 2004 Jon Brassow <jbrassow@redhat.com>
- Update for new upstream sources
* Mon Jul 12 2004 Jon Brassow <jbrassow@redhat.com>
- Update for new upstream sources
* Fri Jun 18 2004 Jon Brassow <jbrassow@redhat.com> 
- Update make files so if kernel_src is not specified, the look
  in /usr/include/linux
* Thu Jun 17 2004 Jon Brassow <jbrassow@redhat.com> 
- Initial build.


