.TH fence_virsh 8

.SH NAME
fence_virsh - I/O Fencing agent for libvirt virtual machines using

.SH SYNOPSIS
.B
fence_virsh
[\fIOPTION\fR]...

.SH DESCRIPTION
fence_virsh is an I/O Fencing agent which can be used with the virtual machines
managed by libvirt. It logs via ssh to a dom0 and there run virsh command,
which does all work.

By default, virsh needs root account to do properly work. So you must allow
ssh login in your sshd_config.

fence_virsh accepts options on the command line as well as from stdin.
Fenced sends parameters through stdin when it execs the agent.  fence_virsh
can be run by itself with command line options.  This is useful for testing 
and for turning outlets on or off from scripts.

.SH OPTIONS
.TP
\fB-a\fP \fIIPaddress\fR
IP address or hostname of dom0.
.TP
\fB-h\fP
Print out a help message describing available options, then exit.
.TP
\fB-l\fP \fIlogin\fR
Login name of user root in dom0.
.TP
\fB-o\fP \fIaction\fR
The action required.  This can be reboot (default), status, off, on, list or monitor.
.TP
\fB-p\fP \fIpassword\fR
Password for login or for passphrase for dom0 machine.
.TP
\fB-B\fP \fIscript\fR
Script to run to retrieve password for dom0 machine.
.TP
\fB-n\fP \fIname\fR
Name of virtual machine to fence
.TP
\fB-x\fP
Use secure connection over ssh (this is default, and can't be disabled)
.TP
\fB-k\fP \fIfilename\fR
Identity file (private key) for ssh
.TP
\fB-T\fP
Test only. Answer NO to the confirmation prompt instead of YES.
.TP
\fB-v\fP
Verbose. Record session to stdout, or debug file if specified (see -D).
.TP
\fB-D\fP
Specifies file, where will be written debug messages from session.
.TP
\fB-V\fP
Print out a version message, then exit.

.SH STDIN PARAMETERS
.TP
\fIagent = < param >\fR
This option is used by fence_node(8) and is ignored by fence_virsh.
.TP
\fIipaddr = < hostname | ip >\fR
IP address or hostname of dom0.
.TP
\fIlogin = < param >\fR
Login name of user root in dom0.
.TP
\fIoption = < param >\fR
The action required.  This can be reboot (default), status, off or on.
.TP
\fIpasswd = < param >\fR
Password for login or for passphrase for dom0 machine.
.TP
\fIpasswd_script = < param >\fR
Script to run to retrieve password for dom0 machine.
.TP
\fIport = < param >\fR
Name of virtual machine to fence.
.TP
\fIsecure = < param >\fR
Use secure connection over ssh (this is default, and can't be disabled)
.TP
\fIidentity_file = < param >\fR
Identity file (private key) for ssh
.TP
\fItest = < param >\fR
Test only.  Answer NO to the confirmation prompt instead of YES.
.TP
\fIverbose = < param >\fR
Verbose.  Record session to stdout, or debug file if specified (see debug).
.TP
\fIdebug = < param >\fR
Specifies file, where will be written debug messages from session.

.SH SEE ALSO
fence(8), fence_node(8)
