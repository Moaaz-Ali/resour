.TH fence_vmware_vmrun 8

.SH NAME
fence_vmware_vmrun - Another I/O Fencing agent for VMware virtual machines

.SH SYNOPSIS
.B
fence_vmware_vmrun
[\fIOPTION\fR]...

.SH DESCRIPTION
fence_vmware_vmrun is an I/O Fencing agent which can be used with the VMware ESX,
VMware ESXi or VMware Server to fence virtual machines. It is based on different
idea than fence_vmware and don't need to make ssh connection to ESX server. This
is main advantage, because ESXi doesn't have remote ssh administration console.

Before you can use this agent, it must be installed vmrun command on every node
you want to make fencing. Vmrun command is available as part of VMware VIX API
SDK package, which is available from VMware web pages (not in official RHEL
repository!). After you have successfully installed VIX API, you should be able
to run vmrun command. This agent supports only vmrun from version 2.0.0 (VIX API
1.6.0).

fence_vmware_vmrun accepts options on the command line as well as from stdin.
Fenced sends parameters through stdin when it execs the agent. fence_vmware_vmrun
can be run by itself with command line options. This is useful for testing
and for turning outlets on or off from scripts.

.SH HOST NAME/IP ADDRESS SPECIFICATION
Host name may be entered in many ways and this string is forwarded directly to
vmrun command. Basic usage is protocol://host_name:[port]/sdk. If you want
secure (https) connection, just use https as protocol, otherwise use http
(this is reason, why agent doesn't have any secure switch). Port isn't
mandatory, but you must use it, if you try use this agent against VMware
server 2.0.0 with default options, where https console runs on port 8333 and
http on 8222. In case of ESX/ESXi, you don't need to specify port, because
default configuration runs https on standard (443) port.

Don't forget to add /sdk suffix, otherwise agent will not work!

.SH OPTIONS
.TP
\fB-a\fP \fIIPaddress\fR
IP address or hostname of ESX/ESXi host machine. See (see
.SM
.B "HOST NAME/IP ADDRESS SPECIFICATION"
above).
.TP
\fB-h\fP
Print out a help message describing available options, then exit.
.TP
\fB-l\fP \fIlogin\fR
Login name to VMware administration console.
.TP
\fB-o\fP \fIaction\fR
The action required.  This can be reboot (default), status, off, on, list
or monitor.
.TP
\fB-p\fP \fIpassword\fR
Password for login for VMware administration console.
.TP
\fB-S\fP \fIscript\fR
Script to run to retrieve password for VMware administration console.
.TP
\fB-n\fP \fIname\fR
Name of virtual machine to fence (ie.[datastore1] test/test.vmx) which
is returned by list command.
.TP
\fB-c\fP \fIcommand\fR
Location of vmrun command. Default is /usr/bin/vmrun, but if you are using
nonstandard location, you may find this switch useful.
.TP
\fB-d\fP \fItype\fR
Type of VMware product you are trying to connect. This is directly forwarded
to vmrun command as -T switch. Default is esx, which is internally alias
for server (2.0.x) , which use same VIX API as ESX and ESXi.
.TP
\fB-T\fP
Test only.  Answer NO to the confirmation prompt instead of YES.
.TP
\fB-v\fP
Verbose. Record session to stdout, or debug file if specified (see -D).
.TP
\fB-D\fP
Specifies file, where will be written debug messages from session.
.TP
\fB-V\fP
Print out a version message, then exit.

.SH STDIN PARAMETERS
.TP
\fIagent = < param >\fR
This option is used by fence_node(8) and is ignored by fence_vmware_vmrun.
.TP
\fIipaddr = < hostname | ip >\fR
IP address or hostname of ESX/ESXi host machine. See (see
.SM
.B "HOST NAME/IP ADDRESS SPECIFICATION"
above).
.TP
\fIlogin = < param >\fR
Login name to VMware administration console.
.TP
\fIoption = < param >\fR
The action required.  This can be reboot (default), status, off, on, list
or monitor.
.TP
\fIpasswd = < param >\fR
Password for login for VMware administration console.
.TP
\fIpasswd_script = < param >\fR
Script to run to retrieve password for VMware administration console.
.TP
\fIport = < param >\fR
Name of virtual machine to fence (ie.[datastore1] test/test.vmx) which
is returned by list command.
.TP
\fIvmrun_cmd = < param >\fR
Location of vmrun command. Default is /usr/bin/vmrun, but if you are using
nonstandard location, you may find this switch useful.
.TP
\fIhost_type = < param >\fR
Type of VMware product you are trying to connect. This is directly forwarded
to vmrun command as -T switch. Default is esx, which is internally alias
for server (2.0.x) , which use same VIX API as ESX and ESXi.
.TP
\fItest = < param >\fR
Test only.  Answer NO to the confirmation prompt instead of YES.
.TP
\fIverbose = < param >\fR
Verbose.  Record session to stdout, or debug file if specified (see debug).
.TP
\fIdebug = < param >\fR
Specifies file, where will be written debug messages from session.

.SH SEE ALSO
fence(8), fence_node(8), fence_vmware(8)
