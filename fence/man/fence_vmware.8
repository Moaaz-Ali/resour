.TH fence_vmware 8

.SH NAME
fence_vmware - I/O Fencing agent for VMware virtual machines

.SH SYNOPSIS
.B 
fence_vmware
[\fIOPTION\fR]...

.SH DESCRIPTION
fence_vmware is an I/O Fencing agent which can be used with the VMware ESX or
VMware Server to fence virtual machines. It logs via ssh to a VMware ESX (or Server) 
physical machine and there run vmware-cmd, which does all work. 

By default, VMware ESX has disabled root account so you must create annother user 
account with limited permissions on VMWare ESX machine. 

Better idea is install right version of vmware-cmd (with same API) to any other machine 
in network and use it for fencing.

fence_vmware accepts options on the command line as well as from stdin.  
Fenced sends parameters through stdin when it execs the agent.  fence_vmware
can be run by itself with command line options.  This is useful for testing 
and for turning outlets on or off from scripts.

.SH OPTIONS
.TP
\fB-a\fP \fIIPaddress\fR
IP address or hostname of machine where is vmware-cmd.
.TP
\fB-A\fP \fIIPAdress\fR
IP adress or hostname of machine where is runing vmware. Default is localhost.
.TP
\fB-h\fP 
Print out a help message describing available options, then exit.
.TP
\fB-l\fP \fIlogin\fR
Login name of machine with vmware-cmd.
.TP
\fB-L\fP \fIlogin\fR
Login name to VMware administration interface.
.TP
\fB-o\fP \fIaction\fR
The action required.  Reboot (default), Status, Off or On.
.TP
\fB-p\fP \fIpassword\fR
Password for login or for passphrase for machine with vmware-cmd.
.TP
\fB-P\fP \fIpassword\fR
Password for login to VMware administration interface.
.TP
\fB-B\fP \fIscript\fR
Script to run to retrieve password for machine with vmware-cmd.
.TP
\fB-R\fP \fIscript\fR
Script to run to retrieve password for VMware administration interface.
.TP
\fB-n\fP \fIname\fR
Name of virtual machine to fence (ie. /vmfs/volumes/48bfcbd1-4624461c-8250-0015c5f3ef0f/Rhel/Rhel.vmx)
.TP
\fB-x\fP
Use secure connection over ssh (this is default, and can't be disabled) 
.TP
\fB-k\fP \fIfilename\fR
Identity file (private key) for ssh
.TP
\fB-T\fP
Test only.  Answer NO to the confirmation prompt instead of YES.
.TP
\fB-v\fP
Verbose. Record session to stdout, or debug file if specified (see -D).
.TP
\fB-D\fP
Specifies file, where will be written debug messages from session.
.TP
\fB-V\fP
Print out a version message, then exit.

.SH STDIN PARAMETERS
.TP
\fIagent = < param >\fR
This option is used by fence_node(8) and is ignored by fence_vmware.
.TP
\fIipaddr = < hostname | ip >\fR
IP address or hostname of machine where is vmware-cmd.
.TP
\fIvmipaddr = < hostname | ip >\fR
IP adress or hostname of machine where is runing vmware. Default is localhost.
.TP
\fIlogin = < param >\fR
Login name of machine with vmware-cmd.
.TP
\fIvmlogin = < param >\fR
Login name to VMware administration interface.
.TP
\fIoption = < param >\fR
The action required.  Reboot (default), Off or On.
.TP
\fIpasswd = < param >\fR
Password for login or for passphrase for machine with vmware-cmd.
.TP
\fIvmpasswd = < param >\fR
Password for login to VMware administration interface.
.TP
\fIpasswd_script = < param >\fR
Script to run to retrieve password for machine with vmware-cmd.
.TP
\fIvmpasswd_script = < param >\fR
Script to run to retrieve password for VMware administration interface.
.TP
\fIport = < param >\fR
Name of virtual machine to fence (ie. /vmfs/volumes/48bfcbd1-4624461c-8250-0015c5f3ef0f/Rhel/Rhel.vmx)
.TP
\fIsecure = < param >\fR
Use secure connection over ssh (this is default, and can't be disabled) 
.TP 
\fIidentity_file = < param >\fR
Identity file (private key) for ssh
.TP
\fItest = < param >\fR
Test only.  Answer NO to the confirmation prompt instead of YES.
.TP
\fIverbose = < param >\fR
Verbose.  Record session to stdout, or debug file if specified (see debug).
.TP
\fIdebug = < param >\fR
Specifies file, where will be written debug messages from session.

.SH SEE ALSO
fence(8), fence_node(8)
