.\"  Copyright (C) Sistina Software, Inc.  1997-2003  All rights reserved.
.\"  Copyright (C) 2004 Red Hat, Inc.  All rights reserved.

.TH fence_gnbd 8

.SH NAME
fence_gnbd - I/O Fencing agent for GNBD-based GFS clusters

.SH SYNOPSIS
.B fence_gnbd
[\fIOPTION\fR]...

.SH DESCRIPTION
fence_gnbd is an I/O Fencing agent used when GFS is accessed through GNBD.  It
uses the gnbd_import program and tells a GNBD server to ignore I/O from a 
specified machine. 

fence_gnbd accepts options on the command line as well as from stdin.
fence_node sends the options through stdin when it execs the agent.
fence_gnbd can be run by itself with command line options which is useful
for testing.

.SH OPTIONS
.TP
\fB-h\fP
Print out a help message describing available options, then exit.
.TP
\fB-m\fP
Selects multipath style fencing. With multipath style fencing, if fence_gnbd
cannot contact the kgnbd_portd process on the gnbd server node, it will fence
that server node. This is necessary to insure that there is no way for the
fenced client to access the storage through that server.
\fBWARNING:\fP Multipath style fencing must be used on a node if it is using
pool multipathing with GNBD devices.
.TP
\fB-q\fP
quiet mode, no output.
.TP
\fB-s\fP \fInode\fP
gnbd client machine to fence.
.TP
\fB-t\fP \fInode\fP
server machine to fence the gnbd client from.  If this option is
not given, the specified gnbd client node will be fenced from all gnbd server
nodes that have GNBDs imported by the machine running fence_gnbd.
Using the -t option is strongly recommended.  The -t option may be used
multiple times to fence a client from multiple servers.
.TP
\fB-V\fP
Print out a version message, then exit.

.SH STDIN PARAMETERS
.TP
\fIagent = < param >\fP
This option is used by fence_node(8) and is ignored by fence_gnbd.
.TP
\fIipaddr = < clustername >\fP
The cluster name of the node to be fenced (required) \fBNOTE:\fP This parameter
no longer allows the IP address of the node to be used. This parameter is
deprecated. Please use \fInodename\fP instead.
.TP
\fInodename = < clustername >\fP
The cluster name of the node to be fenced (required)
.TP
\fIservers = < hostname [ hostname ... ] >\fP
A whitespace separated list of the servers to fence the client from, in
either IP address or hostname form.
.TP
\fIoption = multipath\fP
Select multipath style fencing. \fBWARNING:\fP When multipath style fencing is
used, if the kgnbd_portd process of a gnbd server node cannot be contacted, it
is fenced as well, using its appropriate fencing method.  This means that when
a client is fenced, any node listed as its server that does not have the
gnbd_serv module loaded (which starts kgnbd_portd) will also be fenced.
.TP
\fIretrys = < param >\fP
Number of times to retry connecting to the server after a failed attempt,
before the server is fenced.  This parameter is only valid when used
with multipath style fencing (see above).  The default is 3.
.TP
\fIwait_time = < param >\fP
length of time, in seconds, to wait between retries. This parameter
is only valid when used with multipath style fencing (see above). The default
is 2.

.SH SEE ALSO
fence(8), fenced(8), gnbd_import(8)
